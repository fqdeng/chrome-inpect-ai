<template>
  <div>
    <div class="header">
      <div class="title">ğŸ” Element Inspector v1.0</div>
    </div>

    <div class="config-section">
      <div class="config-title">âš™ï¸ é…ç½®è®¾ç½®</div>
      <div class="form-group">
        <label class="form-label" for="itemSelect">é€‰æ‹©é¡¹ç›®ï¼š</label>
        <div style="display: flex; gap: 8px;">
          <select
            id="itemSelect"
            v-model="currentItemId"
            @change="onItemChange"
            class="form-select"
            style="flex: 1;"
          >
            <option
              v-for="item in config.items"
              :key="item.id"
              :value="item.id"
            >
              {{ item.name }}
            </option>
          </select>
          <button
            @click="showAddForm"
            class="add-btn"
            type="button"
            title="æ·»åŠ æ–°é¡¹ç›®"
          >
            +
          </button>
          <button
            @click="deleteCurrentItem"
            class="delete-btn"
            type="button"
            title="åˆ é™¤å½“å‰é¡¹ç›®"
          >
            Ã—
          </button>
        </div>
      </div>

      <div v-if="showCustomForm" class="form-group">
        <label class="form-label" for="customItemInput">æ–°é¡¹ç›®åç§°ï¼š</label>
        <div style="display: flex; gap: 8px;">
          <input
            id="customItemInput"
            v-model="newItemName"
            @keypress.enter="addNewItem"
            class="form-input"
            type="text"
            placeholder="è¾“å…¥é¡¹ç›®åç§°..."
            ref="customInput"
          >
          <button @click="addNewItem" class="save-btn" type="button">ä¿å­˜</button>
          <button @click="cancelAdd" class="cancel-btn" type="button">å–æ¶ˆ</button>
        </div>
      </div>

      <div class="form-group">
        <label class="form-label" for="promptTextarea">æç¤ºå†…å®¹ï¼š</label>
        <textarea
          id="promptTextarea"
          v-model="currentPrompt"
          @input="onPromptChange"
          class="form-textarea"
          placeholder="è¯·è¾“å…¥æç¤ºå†…å®¹..."
        ></textarea>
      </div>
    </div>

    <div class="instructions">
      <div class="step">
        <div class="step-number">1</div>
        <div class="step-text">
          æŒ‰ä½ <span class="keyboard-key">Left Ctrl</span> é”®
        </div>
      </div>

      <div class="step">
        <div class="step-number">2</div>
        <div class="step-text">
          é¼ æ ‡æ‚¬åœåœ¨æƒ³è¦æ£€æŸ¥çš„å…ƒç´ ä¸Š
        </div>
      </div>

      <div class="step">
        <div class="step-number">3</div>
        <div class="step-text">
          ç‚¹å‡»å…ƒç´ è·å–è¯¦ç»†æ ·å¼ä¿¡æ¯
        </div>
      </div>

      <div class="step">
        <div class="step-number">4</div>
        <div class="step-text">
          åœ¨æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹ç»“æœ
        </div>
      </div>
    </div>

    <div class="status">
      âœ… æ’ä»¶å·²æ¿€æ´»ï¼Œå¯ä»¥å¼€å§‹ä½¿ç”¨ï¼
    </div>

    <div class="footer">
      æ‰“å¼€å¼€å‘è€…å·¥å…· (F12) æŸ¥çœ‹æ§åˆ¶å°è¾“å‡º
    </div>
  </div>
</template>

<script>
import { useInspectorConfig } from '../composables/useInspectorConfig.js'

export default {
  name: 'InspectorPopup',
  setup() {
    return useInspectorConfig()
  }
}
</script>
